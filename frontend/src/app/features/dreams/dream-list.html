@if (dreams$ | async; as dreams) {
  @if (dreams.length) {
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      @for (dream of dreams; track dream.id) {
        <mat-card
          class="cursor-pointer hover:shadow transition-shadow"
          [routerLink]="['/app/dreams', dream.id]"
        >
          <mat-card-header class="pb-0">
            <mat-card-title class="text-lg font-semibold truncate">{{
              dream.title
            }}</mat-card-title>
            <mat-card-subtitle>{{ dream.date | date }}</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content class="pt-2">
            <p class="text-sm text-gray-600 mb-2">{{ dream.content | slice: 0 : 120 }}...</p>
            <app-tag-chips [tags]="dream.tags"></app-tag-chips>
          </mat-card-content>
        </mat-card>
      }
    </div>
  } @else {
    <app-empty-state message="No dreams yet"></app-empty-state>
  }
} @else {
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    @for (_ of skeletons; track $index) {
      <mat-card class="p-4 animate-pulse space-y-2">
        <div class="h-5 bg-gray-200 rounded w-1/2"></div>
        <div class="h-4 bg-gray-200 rounded w-1/3"></div>
        <div class="h-20 bg-gray-100 rounded"></div>
      </mat-card>
    }
  </div>
}
